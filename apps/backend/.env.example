# ============================================
# VetConnect Backend - Environment Configuration
# ============================================
#
# PRODUCTION DEPLOYMENT CHECKLIST:
# --------------------------------
# [ ] Generate JWT_SECRET: openssl rand -base64 64
# [ ] Set strong POSTGRES_PASSWORD (16+ chars, mixed case, numbers, symbols)
# [ ] Generate REDIS_PASSWORD: openssl rand -base64 32
# [ ] Set CORS_ALLOWED_ORIGINS to production domain(s) - NO localhost!
# [ ] Set SPRING_PROFILES_ACTIVE=prod
# [ ] Review all security settings below
# [ ] Test application startup with production config
# [ ] Verify database migrations run successfully
#
# ============================================

# ============================================
# SPRING PROFILES
# ============================================
# Options: dev, prod, test
# CRITICAL: Must be 'prod' for production deployment
SPRING_PROFILES_ACTIVE=dev

# ============================================
# DATABASE CONFIGURATION
# ============================================
POSTGRES_DB=vet_connect
POSTGRES_USER=vetconnect_user
# CRITICAL: Generate strong password for production
# Use: openssl rand -base64 32
# Minimum 16 characters, include uppercase, lowercase, numbers, symbols
POSTGRES_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD_MIN_16_CHARS

# Database connection (Spring Boot will construct JDBC URL from these)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# ============================================
# JWT CONFIGURATION
# ============================================
# CRITICAL: Must generate secure secret for production
# REQUIRED: Minimum 64 characters for HS512 algorithm
# Generate with: openssl rand -base64 64
# NEVER use the same secret in dev and production!
JWT_SECRET=REPLACE_THIS_WITH_64_CHAR_MINIMUM_SECRET_FROM_OPENSSL_RAND_BASE64_64_CHANGE_ME_NOW

# Token expiration times (in milliseconds)
# 86400000 ms = 24 hours (access token)
# 604800000 ms = 7 days (refresh token)
JWT_EXPIRATION=86400000
JWT_REFRESH_EXPIRATION=604800000

# JWT Issuer (should match your domain in production)
JWT_ISSUER_URI=http://localhost:8080

# ============================================
# REDIS CONFIGURATION (Token Blacklist & Caching)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379

# CRITICAL: Set password for production security
# Generate with: openssl rand -base64 32
# IMPORTANT: Leave empty for local dev ONLY if Redis is running without auth
# MUST be set in production!
REDIS_PASSWORD=

# ============================================
# CORS CONFIGURATION
# ============================================
# CRITICAL: In production, ONLY list your actual domain(s)
# NEVER use localhost in production
# NEVER use wildcard (*) in production
# Separate multiple origins with commas (no spaces)
# Examples:
#   Production: https://vetconnect.com,https://www.vetconnect.com
#   Staging: https://staging.vetconnect.com
#   Development: http://localhost:5173,http://localhost:3000
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
# Directory for uploaded files (profile pictures, etc.)
# Will be created automatically if it doesn't exist
# Relative path: from application root
# Absolute path: /var/vetconnect/uploads (production)
FILE_UPLOAD_DIR=uploads

# Maximum file upload size (in bytes)
# 5242880 bytes = 5 MB
MAX_FILE_SIZE=5242880

# Allowed file types (comma-separated, no spaces)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp

# ============================================
# SECURITY CONFIGURATION
# ============================================
# Trusted Proxy IPs (for X-Forwarded-For validation)
# IMPORTANT: Only set this in production behind a load balancer/reverse proxy
# Leave empty for direct connections (development)
# Comma-separated list of proxy IPs that we trust
# Examples:
#   AWS ALB: TRUSTED_PROXY_IPS=10.0.0.0/8
#   Cloudflare: TRUSTED_PROXY_IPS=173.245.48.0/20,103.21.244.0/22
#   Development: TRUSTED_PROXY_IPS= (empty - no proxies)
TRUSTED_PROXY_IPS=

# ============================================
# LOGGING CONFIGURATION
# ============================================
# Logging level (TRACE, DEBUG, INFO, WARN, ERROR)
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_VETCONNECT=DEBUG

# Set to false in production to avoid exposing SQL queries in logs
SPRING_JPA_SHOW_SQL=false

# ============================================
# OPTIONAL: DEVELOPMENT TOOLS
# ============================================
# pgAdmin - Database Management UI (dev/staging only)
# Remove or disable in production
PGADMIN_EMAIL=admin@vetconnect.local
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# ============================================
# PRODUCTION-ONLY SETTINGS
# ============================================
# Uncomment these for production deployment

# AWS Secrets (if using AWS Secrets Manager)
# AWS_REGION=us-east-1
# AWS_SECRETS_MANAGER_SECRET_NAME=vetconnect/production

# Database Connection Pool (production tuning)
# SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=20
# SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=5
# SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000

# Redis Connection Pool
# SPRING_REDIS_LETTUCE_POOL_MAX_ACTIVE=8
# SPRING_REDIS_LETTUCE_POOL_MAX_IDLE=8
# SPRING_REDIS_LETTUCE_POOL_MIN_IDLE=2

# ============================================
# SECURITY NOTES & BEST PRACTICES
# ============================================
# ✅ NEVER commit actual secrets to version control
# ✅ Use different secrets for dev, staging, and production
# ✅ Rotate secrets regularly (every 90 days recommended)
# ✅ Store production secrets in secure vault (AWS Secrets Manager, HashiCorp Vault)
# ✅ Use strong passwords: minimum 16 chars, mixed case, numbers, symbols
# ✅ Enable 2FA for all admin accounts
# ✅ Monitor logs for suspicious activity
# ✅ Keep dependencies updated regularly
# ✅ Run security scans: mvn dependency-check:check
# ✅ Test with production-like environment variables before deploying
#
# ============================================

# ============================================
# QUICK START FOR DEVELOPMENT
# ============================================
# 1. Copy this file: cp .env.example .env
# 2. Generate secrets:
#    JWT_SECRET: openssl rand -base64 64
#    POSTGRES_PASSWORD: openssl rand -base64 32
# 3. Update .env with generated secrets
# 4. Start services: docker-compose up -d
# 5. Run backend: mvn spring-boot:run
# ============================================